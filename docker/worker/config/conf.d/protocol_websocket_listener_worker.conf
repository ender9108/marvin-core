;/etc/supervisor/conf.d/protocol_websocket_listener_worker.conf
;
; WebSocket Listener (Exemple pour Shelly Gen2/Gen3)
; Écoute les messages WebSocket d'un serveur spécifique
; Ce worker est optionnel et doit être configuré par device si nécessaire
;
; Pour activer ce worker :
; 1. Décommenter les lignes ci-dessous
; 2. Configurer l'URL du serveur WebSocket (remplacer ws://192.168.1.100/rpc)
; 3. Optionnel : Configurer SSL si nécessaire (wss://)
; 4. Relancer supervisord ou recharger la configuration
;
; IMPORTANT : Créez un worker par device WebSocket si vous voulez des connexions persistantes
; Exemple : protocol-websocket-listener-shelly-01, protocol-websocket-listener-shelly-02, etc.
;
;[program:marvin-protocol-websocket-listener-example]
;command=php /app/bin/console protocol:websocket:listen ws://192.168.1.100/rpc
;user=marvin
;numprocs=1
;startsecs=0
;autostart=true
;autorestart=true
;startretries=10
;stopwaitsecs=20
;process_name=%(program_name)s
;stdout_logfile=/var/log/supervisor/%(program_name)s.log
;stderr_logfile=/var/log/supervisor/%(program_name)s_error.log
;
; Notes :
; - Remplacer 'example' par un nom significatif (ex: shelly-living-room)
; - Remplacer l'URL par celle de votre device
; - Pour SSL : wss://192.168.1.100/rpc
; - Le worker maintient une connexion persistante avec le serveur
; - En cas de déconnexion, le worker redémarre automatiquement (autorestart=true)
;
; Exemple pour plusieurs devices :
;
;[program:marvin-protocol-websocket-listener-shelly-salon]
;command=php /app/bin/console protocol:websocket:listen ws://192.168.1.101/rpc
;...
;
;[program:marvin-protocol-websocket-listener-shelly-cuisine]
;command=php /app/bin/console protocol:websocket:listen ws://192.168.1.102/rpc
;...
